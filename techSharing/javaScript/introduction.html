<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../../publicTools/animation.js"></script>

    <style type="text/css">
        html, body {
            width: 100%;
            padding: 0;
            margin: 0;
            font: 14px/1.5 'Microsoft YaHei',arial,tahoma,\5b8b\4f53,sans-serif;
        }
        .authorName {
            font-family: 宋体;
            text-shadow: 3px -3px black, 2px -2px white;
        }
        .part1 {
            width: 100%;
            height: 50px;
            background-color: #222;
        }
        .part2 {
            width: 100%;
            height: 1100px;
            background-color: #eee;
        }
        .part2 .book {
            width: 50%;
            position: absolute;
            left: 5%;
            top: 1100px;
        }
        .part2 .bookText {
            position: absolute;
            top: 200px;
            left: 60%;
            width: 30%;
            font-size: 50px;
        }
        .part3 {
            width: 100%;
            height: 4500px;
        }
        .part3 .scenery {
            width: 100%;
            position: relative;
            z-index: 9;
        }
        .part3 .scenery .sceneryImg {
            width: 100%;
            height: 1280px;
            filter: blur(0px) brightness(100%);
            -webkit-filter: blur(0px) brightness(100%);
        }
        .part3 .scenery .sceneryText {
            width: 60%;
            position: absolute;
            top: 1700px;
            left: 20%;
            height: 100%;
            z-index: 10;
            font-size: 60px;
            color: #eee;
        }
        .part3 .scenery .sceneryImg2 {
            width: 100%;
            height: 1280px;
            position: absolute;
            top: 0px;
            left: 0px;
            z-index: 11;
            clip-path: circle(0% at 50% 50%);
            -webkit-clip-path: circle(0% at 50% 50%);
        }
        .part4 {
            width: 100%;
            height: 900px;
        }
        .part4 .title {
            width: 100%;
            height: 100px;
        }
        .part4 .list {
            width: 1394px;
            margin: 0px auto;
        }
        .part4 .list .nameTab {
            display: inline-block;
            width: 140px;
            text-decoration: none;
            height: 600px;
            margin-left: 50px;
            border: #222222 solid 1px;
            border-radius: 8px;
            transform:scale(0.7);
            -webkit-transform:scale(0.7);
            font-size: 62px;
            vertical-align: top;
            cursor: pointer;
        }
        .part4 .list .nameTab div {
            width: 62px;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <div class="part1"></div>
    <div class="part2">
        <img class="book" src="bookimg.jpg">
        <div class="bookText">
            每一个热爱技术的开发人员都希望自己有一天成为某个领域的大师,
            “取其精华，去其糟粕”本就是前人告诉我们的学习态度与方法<br/><br/>
            <span style="float: right;">
                ——
                <span class="authorName">最后的卡德加</span>
            </span>
        </div>
    </div>
    <div class="part3">
        <div class="scenery">
            <img class="sceneryImg" src="sceneryImg.gif">
            <div class="sceneryText">
                要是有所得罪请原谅，<br/>
                本是出自一番好意，<br/>
                只是想显点粗浅技艺，<br/>
                那才是我们的初衷。<br/><br/>
                <span style="float: right;">
                    ——
                    <span class="authorName">最后的卡德加</span>
                </span>
            </div>
            <img class="sceneryImg2" src="sceneryImg2.jpg">
        </div>
    </div>
    <div class="part4">
        <div class="title"></div>
        <div class="list">
            <a class="nameTab" href="./content1.html" style="background-image: linear-gradient(#FFFFFF, #FFFF66); color: #4B0771"><div style="margin-top: 100px">一概述</div></a>
            <a class="nameTab" href="./content2.html" style="background-image: linear-gradient(#FFFF66, #CCFF00); color: #663333"><div style="margin-top: 100px">二对象</div></a>
            <div class="nameTab" style="background-image: linear-gradient(#CCFF00, #33FF00); color: #85442A"><div style="margin-top: 100px">三数组</div></div>
            <div class="nameTab" style="background-image: linear-gradient(#33FF00, #6600CC); color: #CC3D49"><div style="margin-top: 60px">四函数</div></div>
            <div class="nameTab" style="background-image: linear-gradient(#6600CC, #CC0033); color: #DFF07B"><div style="margin-top: 30px">五高级函数</div></div>
            <div class="nameTab" style="background-image: linear-gradient(#CC0033, #663333); color: #FFE1DF"><div>六正则表达式</div></div>
            <div class="nameTab" style="background-image: linear-gradient(#663333, #000000); color: #FFFFFF"><div style="margin-top: 100px">七总结</div></div>
        </div>
    </div>
</body>

<script type="text/javascript">

    const topPosition = 1300

    var part1 = document.getElementsByClassName('book')[0]
    var part2 = document.getElementsByClassName('scenery')[0]
    var part2_1 = document.getElementsByClassName('sceneryImg')[0]
    var part2_2 = document.getElementsByClassName('sceneryText')[0]
    var part2_3 = document.getElementsByClassName('sceneryImg2')[0]
    var part4 = document.getElementsByClassName('nameTab')
    init()
    function init () {
        var target = ['offsetTop', 'top', 80]
        moveDom(part1, target)
        scrollListener(part2, [topPosition, 4500], part2BgFixed)
        scrollListener(part2_1, [topPosition, 2800], part2Img)
        scrollListener(part2_2, [topPosition, 3500], part2Text)
        scrollListener(part2_3, [3500, 4500], part2Img2)
        part4Mouse()
    }

    // 第二部分背景固定
    function part2BgFixed (type, scrollTop) {
        if (type === 1) {
            part2.style.position = 'relative'
            part2.style.top = '0px'
        } else if (type === 2) {
            part2.style.position = 'fixed'
            part2.style.top = '-150px'
        } else {
            part2.style.position = 'relative'
            part2.style.top = 4500 - topPosition + 'px'
        }
    }

    // 第二部分图片滤镜
    function part2Img (type, scrollTop) {
        if (type === 1) {
            part2_1.style.Filter = 'blur(0px) brightness(100%)'
            part2_1.style.WebkitFilter = 'blur(0px) brightness(100%)'
        } else if (type === 2) {
            part2_1.style.Filter = 'blur(' + (scrollTop - topPosition) / 100 + 'px) brightness(' + (100 - (scrollTop - topPosition) / 18) + '%)'
            part2_1.style.WebkitFilter = 'blur(' + (scrollTop - topPosition) / 100 + 'px) brightness(' + (100 - (scrollTop - topPosition) / 18) + '%)'
        } else {
            part2_1.style.Filter = 'blur(0px) brightness(17%)'
            part2_1.style.WebkitFilter = 'blur(15px) brightness(17%)'
        }
    }

    // 第二部分文字滚动
    function part2Text (type, scrollTop) {
        if (type === 1) {
            part2_2.style.top = '1700px'
        } else if (type === 2) {
            part2_2.style.top = 1700 - (scrollTop - topPosition) + 'px'
        } else {
            part2_2.style.top = '-500px'
        }
    }

    // 第二部分图片裁剪
    function part2Img2 (type, scrollTop) {
        if (type === 1) {
            part2_3.style.ClipPath = 'circle(0% at 50% 50%)'
            part2_3.style.WebkitClipPath = 'circle(0% at 50% 50%)'
        } else if (type === 2) {
            part2_3.style.ClipPath = 'circle(' + (scrollTop - 3500) / 100 * 7.5 + '% at 50% 50%)'
            part2_3.style.WebkitClipPath = 'circle(' + (scrollTop - 3500) / 100 * 7.5 + '% at 50% 50%)'
        } else {
            part2_3.style.ClipPath = 'circle(75% at 50% 50%)'
            part2_3.style.WebkitClipPath = 'circle(75% at 50% 50%)'
        }
    }

    // 第四部分监听放大
    function part4Mouse () {
        var trans = function (i) {
            return function () {
                scaleDom(part4, i)
            }
        }
        for (var i = 0; i < part4.length; i++) {
            part4[i].onmouseover = trans(i)
        }
    }

</script>

</html>